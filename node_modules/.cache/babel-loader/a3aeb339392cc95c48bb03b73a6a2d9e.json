{"ast":null,"code":"var _jsxFileName = \"/home/sree/Documents/Works/naadanvipani/frontend/naadan-vipani-trivandrum-for-backend-master/src/utils/Context.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from 'axios';\nimport qs from 'qs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Base_URL = 'http://localhost:4000';\nconst ProductContext = /*#__PURE__*/React.createContext();\n\nfunction ContextProvider(props) {\n  _s();\n\n  const [values, setValues] = useState({\n    // cart : [],\n    products_veg: [],\n    _home_screen: 'kit',\n    // kit or veg\n    kit_screen: '200' //200 or 400\n    // user_address : [],\n\n  });\n  const [userValues, setUserValues] = useState({\n    user_address: [\"sree\", \"abcd\"]\n  });\n  const [Cart, setCart] = useState({\n    cart: [\"sree\", \"abcd\"]\n  });\n\n  const initUserAddress = async () => {\n    let phoneNo = isAuthenticated().phoneNumber;\n    console.log(\"phone num init user:\", phoneNo);\n    let phoneNumber;\n\n    try {\n      phoneNumber = phoneNo.substring(3);\n      console.log(\"phone num rem init user :\", phoneNumber);\n    } catch {}\n\n    await axios({\n      'method': 'POST',\n      'url': `${Base_URL}/phpFiles/getUserDetails.php`,\n      'headers': {\n        'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\n      },\n      'data': qs.stringify({\n        // 'userPhone': phoneNumber,\n        'userPhone': phoneNumber\n      })\n    }).then(res => {\n      // if success\n      if (res.status === 202) {\n        console.log(\"got202 : \", res.data.useraddress[0]);\n        var name_full = res.data.useraddress[0];\n        var name = name_full.name;\n        console.log(\"got202 : \", name);\n        console.log();\n\n        if (name === 'notfound' || name === 'name' || name === 'postError') {\n          console.log(\"no user\");\n          setUserValues({ ...userValues,\n            // user_address : [{ name:\"\",address:\"\", house_name:\"\",landmark:\"\",pin_or_zip:\"\",town_or_city:\"\",phone:phoneNumber }], // match it from backend\n            user_address: []\n          });\n          UpdateNullAddress(res.data.useraddress[0]);\n          console.log(\"here at update null\");\n        } else {\n          console.log(\"res :\");\n          console.log(res.data);\n          setUserValues({ ...userValues,\n            // products_veg : fakedata.products, // match it from backend\n            user_address: [res.data.useraddress[0]] // match it from backend\n\n          });\n        }\n\n        console.log(\"data : \", userValues);\n      }\n    }).catch(err => {// setting dummy data \n    });\n  };\n\n  const initKitProducts = async () => {\n    console.log(\"init kit \"); // await fetch('https://api.npms.io/v2/search?q=react')\n\n    await axios({\n      'method': 'GET',\n      'url': `${Base_URL}/products/`,\n      'headers': {\n        'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\n      },\n      'data': qs.stringify({// 'userPhone': phoneNumber,\n      })\n    }).then(res => {\n      // if success\n      console.log(\"da njan vanneyy : \", res.status);\n\n      if (res.status === 201) {\n        setValues({ ...values,\n          products_veg: res.data // match it from backend\n\n        });\n        console.log(res.data);\n      }\n    }).catch(err => {// setting dummy data\n      // delete this on production\n      // setValues({\n      //     ...values,\n      //     products_veg : fakedata.products \n      // })\n    });\n  };\n\n  useEffect(async () => {\n    // call function to initialize data to product kit\n    await initUserAddress();\n    await initKitProducts(); // await initCartItems()\n    // await initOrderPlaced()\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: { ...userValues,\n      ...values,\n      setValues: setValues,\n      setUserValues: setUserValues\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 9\n  }, this);\n} // const ContextConsumer = ProductContext.Consumer;\n\n\n_s(ContextProvider, \"sro4Czo7b78YPi7P30ECJYQAcQg=\");\n\n_c = ContextProvider;\nconst ContextConsumer = ProductContext;\nexport { ContextConsumer, ContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"sources":["/home/sree/Documents/Works/naadanvipani/frontend/naadan-vipani-trivandrum-for-backend-master/src/utils/Context.js"],"names":["React","useEffect","useState","useContext","axios","qs","Base_URL","ProductContext","createContext","ContextProvider","props","values","setValues","products_veg","_home_screen","kit_screen","userValues","setUserValues","user_address","Cart","setCart","cart","initUserAddress","phoneNo","isAuthenticated","phoneNumber","console","log","substring","stringify","then","res","status","data","useraddress","name_full","name","UpdateNullAddress","catch","err","initKitProducts","children","ContextConsumer"],"mappings":"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","sourcesContent":["import React,{useEffect, useState, useContext} from 'react'\nimport axios from 'axios'\nimport qs from 'qs';\nconst Base_URL = 'http://localhost:4000'\n\nconst ProductContext = React.createContext()\n\nfunction  ContextProvider(props) {\n\n    const [values,setValues] = useState({\n        // cart : [],\n        products_veg: [],\n        _home_screen : 'kit', // kit or veg\n        kit_screen : '200',      //200 or 400\n        // user_address : [],\n\n    })\n    \n    const[userValues,setUserValues] = useState({\n        user_address : [\"sree\",\"abcd\"],\n   })\n\n\n   const[Cart,setCart] = useState({\n        cart : [\"sree\",\"abcd\"],\n    })\n\n\n    const initUserAddress = async ()=>{\n\n\n        let phoneNo = isAuthenticated().phoneNumber;\n        console.log(\"phone num init user:\" , phoneNo);\n        let phoneNumber ;\n        try\n        {\n            phoneNumber = (phoneNo).substring(3);\n            console.log(\"phone num rem init user :\" , phoneNumber);\n        }\n        catch{\n\n        }\n\n        await axios({\n            'method'    :   'POST',\n            'url'       :   `${Base_URL}/phpFiles/getUserDetails.php`,\n            'headers'   :   {\n                                'content-type': 'application/x-www-form-urlencoded;charset=utf-8',\n                            },\n            'data'      :  qs.stringify({\n                            // 'userPhone': phoneNumber,\n                            'userPhone': phoneNumber,\n                            \n                            }),\n        })\n        .then (res =>{\n            // if success\n            if(res.status === 202)\n            {\n                console.log(\"got202 : \",res.data.useraddress[0]);\n                var name_full = res.data.useraddress[0];\n                var name = name_full.name;\n                console.log(\"got202 : \" , name);\n                console.log()\n                if( (name==='notfound') || (name==='name') || (name==='postError') )\n                {\n                    console.log(\"no user\");\n                    setUserValues({\n                        ...userValues,\n                        // user_address : [{ name:\"\",address:\"\", house_name:\"\",landmark:\"\",pin_or_zip:\"\",town_or_city:\"\",phone:phoneNumber }], // match it from backend\n                        user_address :[],\n                    });\n                    UpdateNullAddress(res.data.useraddress[0]) ;\n                    console.log(\"here at update null\");\n                    \n                }\n                else\n                {\n                    console.log(\"res :\");\n                    console.log(res.data);\n                    setUserValues({\n                                    ...userValues,\n                                    // products_veg : fakedata.products, // match it from backend\n                                    user_address : [res.data.useraddress[0]], // match it from backend\n                                });\n                    \n                }\n                \n                \n                console.log(\"data : \",userValues);\n            }\n        }).catch(err=>{\n            // setting dummy data \n        })\n\n\n\n    }\n\n\n\n\n\n\n   const initKitProducts = async ()=>{\n       \n    console.log(\"init kit \");\n    // await fetch('https://api.npms.io/v2/search?q=react')\n    await axios({\n        'method'    :   'GET',\n        'url'       :   `${Base_URL}/products/`,\n        'headers'   :   {\n                            'content-type': 'application/x-www-form-urlencoded;charset=utf-8',\n                        },\n        'data'      :  qs.stringify({\n                        // 'userPhone': phoneNumber,\n                        \n                        \n                        }),\n    })\n    .then(res =>{\n        // if success\n        console.log(\"da njan vanneyy : \", res.status );\n        if(res.status === 201)\n        {\n            setValues({\n                ...values,\n                products_veg : res.data, // match it from backend\n            })\n            console.log(res.data);\n        }\n    }).catch(err=>{\n        // setting dummy data\n        // delete this on production\n        // setValues({\n        //     ...values,\n        //     products_veg : fakedata.products \n        // })\n    })\n    \n}\n\n\n\n\n   useEffect( async ()=>{\n        // call function to initialize data to product kit\n        await initUserAddress()\n        await initKitProducts()\n        // await initCartItems()\n        \n        // await initOrderPlaced()\n        \n    },[])\n\n\n\n\n    return (\n        <ProductContext.Provider value={{\n            ...userValues,\n            ...values,\n            setValues : setValues,\n            setUserValues : setUserValues,\n        }}>\n            {props.children}\n        </ProductContext.Provider>\n    )\n}\n\n\n// const ContextConsumer = ProductContext.Consumer;\nconst ContextConsumer =ProductContext  ;\nexport {ContextConsumer,ContextProvider}\n\n"]},"metadata":{},"sourceType":"module"}