{"ast":null,"code":"var _jsxFileName = \"/home/sree/Documents/Works/naadanvipani/frontend/naadan-vipani-trivandrum-for-backend-master/src/utils/Context.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from 'axios';\nimport qs from 'qs';\nimport { authenticate, isAuthenticated } from '../Auth/AuthenticationHandler';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Base_URL = 'http://localhost:4000';\nconst ProductContext = /*#__PURE__*/React.createContext();\n\nfunction ContextProvider(props) {\n  _s();\n\n  // FOR CHANGING BLOCK AND DISTRICT FROM LOGIN SCREEN\n  const handleChange = name => event => {\n    setValues({ ...values,\n      [name]: event.target.value\n    });\n  }; // FOR CHANGING BLOCK AND DISTRICT FROM LOGIN SCREEN\n\n\n  const [values, setValues] = useState({\n    // cart : [],\n    products_veg: [],\n    _home_screen: 'kit',\n    // kit or veg\n    kit_screen: '200' //200 or 400\n    // user_address : [],\n\n  });\n  const [userValues, setUserValues] = useState({\n    user_address: [\"sree\", \"abcd\"]\n  });\n  const [Cart, setCart] = useState({\n    cart: []\n  });\n\n  const initUserAddress = async () => {\n    let phoneNo = isAuthenticated().phoneNumber;\n    let phoneNumber;\n\n    try {\n      phoneNumber = phoneNo.substring(3);\n    } catch {}\n\n    await axios({\n      'method': 'GET',\n      'url': `${Base_URL}/user/${phoneNumber}`,\n      'headers': {\n        'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\n      },\n      'data': qs.stringify({})\n    }).then(res => {\n      // if success\n      if (res.status === 201) {\n        // console.log(res.data)\n        if (res.data.full_name === 'notfound') {\n          // console.log(\"no user\");\n          UpdateNullAddress();\n        } else {\n          setUserValues({ ...userValues,\n            user_address: [res.data] // match it from backend\n\n          });\n        }\n      } else {\n        console.log(\"401 : \", res.data);\n      }\n    }).catch(err => {});\n  };\n\n  const UpdateNullAddress = async () => {\n    let phoneNo = isAuthenticated().phoneNumber;\n    let phoneNumber;\n\n    try {\n      phoneNumber = phoneNo.substring(3);\n    } catch {}\n\n    await axios({\n      'method': 'POST',\n      'url': `${Base_URL}/user/`,\n      'headers': {\n        'content-type': 'application/json;charset=utf-8'\n      },\n      'data': {\n        id: `${phoneNumber}`,\n        full_name: \"name\",\n        house_name: \"name\",\n        street_name: \"name\",\n        pincode: \"name\",\n        district: 1,\n        block: 1\n      }\n    }).then(res => {\n      // if success\n      if (res.status === 201) {\n        console.log(\" data pushed : \", res.data); // let phoneNo = isAuthenticated().phoneNumber;\n        // let phoneNumber;\n\n        setUserValues({ ...userValues,\n          user_address: [res.data] // match it from backend\n\n        });\n      }\n    }).catch(err => {});\n  };\n\n  const initKitProducts = async () => {\n    // console.log(\"init kit \");\n    // await fetch('https://api.npms.io/v2/search?q=react')\n    await axios({\n      'method': 'GET',\n      'url': `${Base_URL}/products/`,\n      'headers': {\n        'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\n      },\n      'data': qs.stringify({// 'userPhone': phoneNumber,\n      })\n    }).then(res => {\n      // if success\n      // console.log(\"da njan vanneyy : \", res.status );\n      if (res.status === 201) {\n        setValues({ ...values,\n          products_veg: res.data // match it from backend\n\n        }); // console.log(res.data);\n      }\n    }).catch(err => {});\n  };\n\n  useEffect(async () => {\n    // call function to initialize data to product kit\n    await initUserAddress();\n    await initKitProducts(); // await initCartItems()\n    // await initOrderPlaced()\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: { ...userValues,\n      ...values,\n      setValues: setValues,\n      setUserValues: setUserValues\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n} // const ContextConsumer = ProductContext.Consumer;\n\n\n_s(ContextProvider, \"Hppa/dz7eOpy6WHEasvGqND+hkc=\");\n\n_c = ContextProvider;\nconst ContextConsumer = ProductContext;\nexport { ContextConsumer, ContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"sources":["/home/sree/Documents/Works/naadanvipani/frontend/naadan-vipani-trivandrum-for-backend-master/src/utils/Context.js"],"names":["React","useEffect","useState","useContext","axios","qs","authenticate","isAuthenticated","Base_URL","ProductContext","createContext","ContextProvider","props","handleChange","name","event","setValues","values","target","value","products_veg","_home_screen","kit_screen","userValues","setUserValues","user_address","Cart","setCart","cart","initUserAddress","phoneNo","phoneNumber","substring","stringify","then","res","status","data","full_name","UpdateNullAddress","console","log","catch","err","id","house_name","street_name","pincode","district","block","initKitProducts","children","ContextConsumer"],"mappings":"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","sourcesContent":["import React,{useEffect, useState, useContext} from 'react'\nimport axios from 'axios'\nimport qs from 'qs';\nimport {authenticate, isAuthenticated} from '../Auth/AuthenticationHandler'\n\nconst Base_URL = 'http://localhost:4000'\n\n\n\n\n\n\n\nconst ProductContext = React.createContext()\n\nfunction  ContextProvider(props) {\n\n\n\n\n// FOR CHANGING BLOCK AND DISTRICT FROM LOGIN SCREEN\n    const handleChange = name => event => { \n        setValues({ ...values, [name]: event.target.value })\n    }\n// FOR CHANGING BLOCK AND DISTRICT FROM LOGIN SCREEN\n\n\n\n\n    const [values,setValues] = useState({\n        // cart : [],\n        products_veg: [],\n        _home_screen : 'kit', // kit or veg\n        kit_screen : '200',      //200 or 400\n        // user_address : [],\n    })\n    \n    const[userValues,setUserValues] = useState({\n        user_address : [\"sree\",\"abcd\"],\n   })\n\n\n   const[Cart,setCart] = useState({\n        cart : [],\n    })\n\n\n    const initUserAddress = async ()=>{\n        let phoneNo = isAuthenticated().phoneNumber;\n        let phoneNumber ;\n\n        try\n        {\n            phoneNumber = (phoneNo).substring(3);\n        }catch{\n\n        }\n\n        await axios({\n            'method'    :   'GET',\n            'url'       :   `${Base_URL}/user/${phoneNumber}`,\n            'headers'   :   {\n                                'content-type': 'application/x-www-form-urlencoded;charset=utf-8',\n                            },\n            'data'      :  qs.stringify({\n                            }),\n        })\n        .then (res =>{\n            // if success\n            if(res.status === 201)\n            {\n                // console.log(res.data)\n                if( (res.data.full_name==='notfound') )\n                {\n                    // console.log(\"no user\");\n                    UpdateNullAddress() ;\n                }\n                else\n                {\n                    setUserValues({\n                                    ...userValues,\n                                    user_address : [res.data], // match it from backend\n                                });    \n                }\n                \n            }\n            else {\n                console.log(\"401 : \" , res.data )\n            }\n        }).catch(err=>{\n        })\n\n\n\n    }\n\n\n\n\n    const UpdateNullAddress = async ()=>{\n        \n        let phoneNo = isAuthenticated().phoneNumber;\n        \n        let phoneNumber;\n        try{\n            phoneNumber = (phoneNo).substring(3);\n        }\n        catch{\n\n        }\n        \n        await axios({\n            'method'    :   'POST',\n            'url'       :   `${Base_URL}/user/`,\n            'headers'   :   {\n                                'content-type': 'application/json;charset=utf-8',\n                            },\n            'data'      :  {\n                                id:`${phoneNumber}`,\n                                full_name:\"name\",\n                                house_name:\"name\",\n                                street_name:\"name\", \n                                pincode:\"name\",\n                                district:1, \n                                block:1\n                           },\n        })\n        .then(res =>{\n            // if success\n            if(res.status === 201)\n            {\n                console.log(\" data pushed : \" , res.data )\n                // let phoneNo = isAuthenticated().phoneNumber;\n                // let phoneNumber;\n                \n                setUserValues({\n                                ...userValues,\n                                user_address : [res.data], // match it from backend\n                            })\n            }\n        }).catch(err=>{\n            \n        })\n        \n    }\n\n\n\n\n\n\nconst initKitProducts = async ()=>{\n       \n    // console.log(\"init kit \");\n    // await fetch('https://api.npms.io/v2/search?q=react')\n    await axios({\n        'method'    :   'GET',\n        'url'       :   `${Base_URL}/products/`,\n        'headers'   :   {\n                            'content-type': 'application/x-www-form-urlencoded;charset=utf-8',\n                        },\n        'data'      :  qs.stringify({\n                        // 'userPhone': phoneNumber,\n                        }),\n    })\n    .then(res =>{\n        // if success\n        // console.log(\"da njan vanneyy : \", res.status );\n        if(res.status === 201)\n        {\n            setValues({\n                ...values,\n                products_veg : res.data, // match it from backend\n            })\n            // console.log(res.data);\n        }\n    }).catch(err=>{\n    })\n    \n}\n\n\n\n\n   useEffect( async ()=>{\n        // call function to initialize data to product kit\n        await initUserAddress()\n\n\n\n        await initKitProducts(  )\n        // await initCartItems()\n        \n        // await initOrderPlaced()\n        \n    },[])\n\n\n\n\n    return (\n        <ProductContext.Provider value={{\n            ...userValues,\n            ...values,\n            setValues : setValues,\n            setUserValues : setUserValues,\n        }}>\n            {props.children}\n        </ProductContext.Provider>\n    )\n}\n\n\n// const ContextConsumer = ProductContext.Consumer;\nconst ContextConsumer =ProductContext  ;\nexport {ContextConsumer,ContextProvider}\n\n"]},"metadata":{},"sourceType":"module"}